(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-05e6ff6a"],{2306:function(t,a,e){"use strict";e.r(a);var l=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("b-row",{staticClass:"animated fadeIn"},[e("b-col",{attrs:{cols:"12"}},[e("b-card",{attrs:{"no-header":""}},[e("template",{slot:"header"},[e("b-row",[e("b-col",{attrs:{cols:"6"}},[e("h3",{staticClass:"card-title"},[t._v("Portfolio Details")])]),e("b-col",{attrs:{cols:"6"}},[e("b-button-toolbar",{staticClass:"float-right",attrs:{"aria-label":"Toolbar with buttons group"}},[e("b-button-group",[e("b-button",{attrs:{variant:"outline-primary"},on:{click:t.openWalletEdit}},[e("i",{staticClass:"cui-note icons"}),t._v(" Edit\n                ")]),e("b-button",{attrs:{variant:"outline-danger"},on:{click:t.deleteWallet}},[e("i",{staticClass:"cui-trash icons"}),t._v(" Delete\n                ")])],1)],1)],1)],1)],1),e("b-form",[e("b-row",[e("b-col",{attrs:{cols:"12"}},[e("b-form-group",[e("b-input-group",[e("b-input-group-prepend",[e("b-input-group-text",[t._v("Portfolio Name")])],1),e("b-form-input",{attrs:{value:t.walletName,type:"text",disabled:""}})],1)],1)],1)],1),e("b-row",[e("b-col",{attrs:{xl:"3",lg:"3",md:"12",sm:"12",xs:"12"}},[e("b-form-group",[e("b-input-group",[e("b-input-group-prepend",[e("b-input-group-text",[t._v("€ Total Invest")])],1),e("b-form-input",{attrs:{value:t.utils.formatCurrency(t.totalInvest),type:"text",disabled:""}})],1)],1)],1),e("b-col",{attrs:{xl:"3",lg:"3",md:"12",sm:"12",xs:"12"}},[e("b-form-group",[e("b-input-group",[e("b-input-group-prepend",[e("b-input-group-text",[t._v("€ Total")])],1),e("b-form-input",{attrs:{value:t.utils.formatCurrency(t.totalEnd),type:"text",disabled:""}})],1)],1)],1),e("b-col",{attrs:{xl:"3",lg:"3",md:"12",sm:"12",xs:"12"}},[e("b-form-group",[e("b-input-group",[e("b-input-group-prepend",[e("b-input-group-text",[t._v("€ Total Gain")])],1),e("b-form-input",{attrs:{value:t.utils.formatCurrency(t.totalEnd-t.totalInvest),type:"text",disabled:""}})],1)],1)],1),e("b-col",{attrs:{xl:"3",lg:"3",md:"12",sm:"12",xs:"12"}},[e("b-form-group",[e("b-input-group",[e("b-input-group-prepend",[e("b-input-group-text",[t._v("Status")])],1),e("b-input-group-text",{class:"bg-"+(t.valArrow>0?"success":t.valArrow="danger")},[e("i",{staticClass:"fa",class:"fa-thumbs-"+(t.valArrow>=0?"up":"down")})])],1)],1)],1)],1),e("div",{attrs:{slot:"footer"},slot:"footer"})],1),e("b-row",[e("b-col",{attrs:{cols:"12"}},[e("b-card",{attrs:{"no-body":""}},[e("template",{slot:"header"},[e("b-row",[e("b-col",{attrs:{cols:"12"}},[e("h4",{staticClass:"card-title"},[t._v(t._s(t.caption))])])],1)],1),e("b-table",{attrs:{stripe:"",bordered:"",small:"",responsive:"sm",items:t.items,fields:t.fields,"current-page":t.currentPage,"per-page":t.perPage},on:{"row-clicked":t.rowClicked},scopedSlots:t._u([{key:"dateInvest",fn:function(a){return[t._v(t._s(t.utils.onlyDateFormat(a.item.dateInvest)))]}},{key:"cotacaoUp",fn:function(a){return[t._v(t._s(t.utils.formatCurrency(a.item.cotacaoUp)))]}},{key:"valInvest",fn:function(a){return[t._v(t._s(t.utils.formatCurrency(a.item.valInvest)))]}},{key:"active",fn:function(t){return[e("input",{attrs:{type:"checkbox",disabled:""},domProps:{checked:t.item.active}})]}},{key:"dateInative",fn:function(a){return[a.item.active?e("n",[t._v("- - -")]):e("n",[t._v(t._s(t.utils.onlyDateFormat(a.item.dateInative)))])]}},{key:"lastvalUp",fn:function(a){return[t._v(t._s(t.utils.formatCurrency(a.item.lastvalUp)))]}},{key:"lastDate",fn:function(a){return[t._v(t._s(t.utils.onlyDateFormat(a.item.lastDate)))]}},{key:"lastVal",fn:function(a){return[t._v(t._s(t.utils.formatCurrency(a.item.lastVal)))]}},{key:"gainValue",fn:function(a){return[e("b-card",{staticClass:"mt-0 mb-0 pt-0 pb-0",class:a.item.gainValue>0?"bg-success":"bg-danger",attrs:{"no-body":!0}},[a.item.active?e("b",[t._v(t._s(t.utils.formatCurrency(a.item.gainValue)))]):e("b",[t._v("0,00")])])]}}])}),e("nav",[e("b-pagination",{attrs:{size:"sm",align:"center","total-rows":t.getRowCount(t.items),"per-page":t.perPage,"prev-text":"Prev","next-text":"Next"},model:{value:t.currentPage,callback:function(a){t.currentPage=a},expression:"currentPage"}})],1)],2)],1)],1),e("b-row",[t.showChart?e("b-col",{attrs:{cols:"12"}},[e("resize-chart-line",{attrs:{lineChartId:"lineChart-1",dataChartVals:t.walletMoney}})],1):t._e(),t._l(t.charFundsData,function(t,a){return e("b-col",{key:a,attrs:{xl:"6",lg:"6",md:"12",sm:"12",xs:"12"}},[e("resize-chart-line",{attrs:{lineChartId:"lineChartFund-"+a,dataChartVals:t}})],1)})],2),e("template",{slot:"footer"},[e("b-row",[e("b-col",{attrs:{cols:"12"}},[e("b-button",{attrs:{block:"",variant:"outline-primary"},on:{click:t.goBack}},[e("i",{staticClass:"cui-account-logout icons active mt-3"}),t._v(" Back\n            ")])],1)],1)],1)],2)],1),e("b-modal",{staticClass:"modal-danger",attrs:{title:"Attention","ok-variant":"danger"},on:{ok:t.closeModalAccept},model:{value:t.deleteWalletModal,callback:function(a){t.deleteWalletModal=a},expression:"deleteWalletModal"}},[t._v("\n    Are you sure you want to delete the Portfolio?\n    "),e("br"),t._v('\n    "'+t._s(t.walletName)+'"\n  ')])],1)},o=[],s=(e("ac6a"),e("55dd"),e("7f7f"),e("a481"),e("d903")),r=function(){var t=this,a=t.$createElement,e=t._self._c||a;return t.showChart?e("b-card",{attrs:{"no-header":""}},[e("template",{slot:"header"},[e("b-row",[e("b-col",{attrs:{cols:"5"}},[e("h4",{staticClass:"card-title"},[t._v(t._s(t.dataChartVals.title))])]),e("b-col",{staticClass:"d-md-block d-sm-block d-xs-block",attrs:{cols:"7"}},[e("b-button-toolbar",{staticClass:"float-right",attrs:{"aria-label":"Toolbar with buttons group"}},[e("b-form-radio-group",{staticClass:"mr-3",attrs:{id:"radiosBtn",buttons:"","button-variant":"outline-secondary",name:"radiosBtn"},model:{value:t.selected,callback:function(a){t.selected=a},expression:"selected"}},[e("b-form-radio",{attrs:{value:"30"}},[t._v("1M")]),t.dataChartVals.labels.length>=90?e("b-form-radio",{attrs:{value:"90"}},[t._v("3M")]):t._e(),t.dataChartVals.labels.length>=180?e("b-form-radio",{attrs:{value:"180"}},[t._v("6M")]):t._e(),t.dataChartVals.labels.length>=365?e("b-form-radio",{attrs:{value:"365"}},[t._v("1Y")]):t._e(),t.dataChartVals.labels.length>=730?e("b-form-radio",{attrs:{value:"730"}},[t._v("2Y")]):t._e(),t.dataChartVals.labels.length>=1095?e("b-form-radio",{attrs:{value:"1095"}},[t._v("3Y")]):t._e(),t.dataChartVals.labels.length>=1460?e("b-form-radio",{attrs:{value:"1460"}},[t._v("4Y")]):t._e(),t.dataChartVals.labels.length>=1825?e("b-form-radio",{attrs:{value:"1825"}},[t._v("5Y")]):t._e(),e("b-form-radio",{attrs:{value:t.dataChartVals.labels.length}},[t._v("All")])],1)],1)],1)],1)],1),e("b-row",[e("b-col",{attrs:{cols:"12"}},[e("chart-line",{attrs:{id:t.lineChartId,lineChartId:t.lineChartId,chartTitle:"",dataChartLabel:t.chartDataVals.labels,dataChartValues:t.chartDataVals.values}})],1)],1)],2):t._e()},n=[],i={components:{ChartLine:s["a"]},data:function(){return{selected:"30",chartDataVals:{labels:[],values:[]},showChart:!1}},props:["lineChartId","dataChartVals"],name:"ResizeChartLine",methods:{createChartData:function(t,a){this.chartDataVals={labels:t,values:a},this.showChart=!0}},mounted:function(){if(this.dataChartVals){var t=this.dataChartVals.labels.slice(Math.max(this.dataChartVals.labels.length-this.selected,1)),a=this.dataChartVals.values.slice(Math.max(this.dataChartVals.values.length-this.selected,1));this.createChartData(t,a),this.showChart=!0}},beforeCreate:function(){},beforeDestroy:function(){},watch:{selected:function(t){var a=this.dataChartVals.labels.slice(Math.max(this.dataChartVals.labels.length-t,1)),e=this.dataChartVals.values.slice(Math.max(this.dataChartVals.values.length-t,1));this.createChartData(a,e)}}},u=i,c=e("2877"),d=Object(c["a"])(u,r,n,!1,null,null,null),h=d.exports,p=e("9be8"),b={components:{ChartLine:s["a"],ResizeChartLine:h},props:{caption:{type:String,default:"List Funds in Portfolio"},hover:{type:Boolean,default:!0},striped:{type:Boolean,default:!0},bordered:{type:Boolean,default:!1},small:{type:Boolean,default:!1},fixed:{type:Boolean,default:!1}},name:"PortfolioView",data:function(){return{wallet:"",walletName:"",selected:"30",items:[],fields:[{key:"name",sortable:!0,label:"Fund Name"},{key:"isin",sortable:!0},{key:"dateInvest",label:"Invested Date"},{key:"nUps",label:"Nº Ups"},{key:"cotacaoUp",label:"Buy Price"},{key:"valInvest",label:"Invested Value"},{key:"lastvalUp",label:"Last Value Up"},{key:"lastDate",label:"Last Date Update"},{key:"lastVal",label:"Last Value"},{key:"gainValue",label:"Gain",sortable:!0},{key:"active",label:"Active"},{key:"dateInative"}],currentPage:1,perPage:10,totalRows:0,walletMoney:{labels:[],values:[],title:"Portfolio History"},chartData:{labels:[],values:[]},charFundsData:[],showChart:!1,deleteWalletModal:!1,totalInvest:0,totalEnd:0,valArrow:0,utils:p["a"]}},methods:{goBack:function(){this.$router.go(-1),this.$router.replace({path:"/Portfoliofunds"})},deleteWallet:function(){this.deleteWalletModal=!0},closeModalAccept:function(){this.deleteWalletModal=!1,this.$loading.show(),this.$http.delete(p["a"].geturl()+"/api/portfoliofunds/"+JSON.parse(localStorage.getItem("user")).data._id+"/"+this.wallet).then(function(t){var a=t.data;!0===a.status?(this.$notify({group:"notification",title:"Delete Portfolio.",type:"success",text:a.data,position:"top center"}),this.$router.push("/Portfoliofunds")):this.$notify({group:"notification",title:"Delete Portfolio.",type:"warning",text:a.data,position:"top center"}),this.$loading.hide()}).catch(function(t){console.log("Error",t),t&&401===t.status?(this.$router.push("/login"),localStorage.removeItem("user"),this.$notify({group:"notification",title:"Login Error.",type:"danger",text:t.body.data,position:"top center"})):this.$notify({group:"notification",title:"Error Delete Portfolio.",type:"danger",text:"Error "+t,position:"top center"}),this.$loading.hide()})},openWalletEdit:function(){this.$router.push("/Portfoliofunds/PortfolioEdit/"+this.wallet)},getWalletFundList:function(){this.$http.get(p["a"].geturl()+"/api/portfoliofunds/"+JSON.parse(localStorage.getItem("user")).data._id+"/"+this.wallet).then(function(t){var a=t.data;if(console.log("Wallet Funds List",a),!0===a.status){var e=a.data,l=e.listFunds,o=[];this.walletName=e.nameWallet,this.totalInvest=e.startWalletMoney,this.totalEnd=e.lastWalletMoney,this.valArrow=this.totalEnd-this.totalInvest;for(var s=0;s<l.length;s++)if(l[s]){o.push({isin:l[s].isin,name:l[s].name,dateInvest:l[s].dateInvest,nUps:l[s].nUps,cotacaoUp:l[s].cotacaoUp,valInvest:l[s].valInvest,lastvalUp:l[s].moneyFund[l[s].moneyFund.length-1].Value,lastDate:l[s].moneyFund[l[s].moneyFund.length-1].EndDate,lastVal:l[s].moneyFund[l[s].moneyFund.length-1].moneyCalc,gainValue:l[s].moneyFund[l[s].moneyFund.length-1].moneyCalc-l[s].valInvest,active:l[s].active,dateInative:l[s].dateInative});for(var r=[],n=[],i=0;i<l[s].moneyFund.length;i++)r.push(p["a"].onlyShortDateFormat(l[s].moneyFund[i].EndDate)),n.push(l[s].moneyFund[i].moneyCalc);this.charFundsData.push({labels:r,values:n,title:l[s].name+" - "+l[s].isin})}this.items=o,this.items=this.items.sort(p["a"].dynamicSort("name"));for(var u=e.moneyWallet,c=0;c<u.length;c++)this.walletMoney.labels.push(p["a"].onlyShortDateFormat(u[c].EndDate)),this.walletMoney.values.push(u[c].moneyWalletCalc.toFixed(2));var d=this.walletMoney.labels.slice(Math.max(this.walletMoney.labels.length-this.selected,1)),h=this.walletMoney.values.slice(Math.max(this.walletMoney.values.length-this.selected,1));this.createChartData(d,h),this.showChart=!0}else this.$notify({group:"notification",title:"Find portfolio.",type:"warning",text:a.data,position:"top center"});this.$loading.hide()}).catch(function(t){console.log("Error",t),t&&401===t.status?(this.$router.push("/login"),localStorage.removeItem("user"),this.$notify({group:"notification",title:"Login Error.",type:"danger",text:t.body.data,position:"top center"})):this.$notify({group:"notification",title:"Error get user portfolio.",type:"danger",text:"Error "+t,position:"top center"}),this.$loading.hide()})},getRowCount:function(t){return t.length},createChartData:function(t,a){this.chartData={labels:t,values:a},this.showChart=!0}},created:function(){this.wallet=this.$route.params.wallet,this.getWalletFundList()},mounted:function(){this.$loading.show()},beforeCreate:function(){},beforeDestroy:function(){},watch:{selected:function(t){var a=this.walletMoney.labels.slice(Math.max(this.walletMoney.labels.length-t,1)),e=this.walletMoney.values.slice(Math.max(this.walletMoney.values.length-t,1));this.createChartData(a,e)}}},f=b,v=Object(c["a"])(f,l,o,!1,null,null,null);a["default"]=v.exports},"2f21":function(t,a,e){"use strict";var l=e("79e5");t.exports=function(t,a){return!!t&&l(function(){a?t.call(null,function(){},1):t.call(null)})}},"55dd":function(t,a,e){"use strict";var l=e("5ca1"),o=e("d8e8"),s=e("4bf8"),r=e("79e5"),n=[].sort,i=[1,2,3];l(l.P+l.F*(r(function(){i.sort(void 0)})||!r(function(){i.sort(null)})||!e("2f21")(n)),"Array",{sort:function(t){return void 0===t?n.call(s(this)):n.call(s(this),o(t))}})}}]);
//# sourceMappingURL=chunk-05e6ff6a.bf081c6f.js.map