(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-584241d7"],{"194db":function(t,e,s){},"220c":function(t,e,s){"use strict";var n=s("25df"),o=s.n(n);o.a},"25df":function(t,e,s){},"73a8":function(t,e,s){"use strict";var n=s("194db"),o=s.n(n);o.a},a42a:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("CRow",{staticClass:"animated fadeIn"},[s("CCol",{attrs:{col:"12"}},[s("CCard",{attrs:{"no-header":""}},[s("CCardHeader",[s("CRow",[s("CCol",{attrs:{sm:"12"}},[s("h3",{staticClass:"card-title mb-0"},[t._v("New Portfolio of Funds")])])],1)],1),s("CCardBody",{staticClass:"mb-0 mt-0 pb-0 pt-0"},[s("CForm",[s("CCard",{staticClass:"mb-0 pt-2 pb-2",attrs:{"no-header":""}},[s("CCardHeader",[s("CRow",[s("CCol",{attrs:{col:"12"}},[s("CInput",{ref:"walletNameFocus",staticClass:"mb-0",attrs:{type:"text",placeholder:"Please enter Portfolio Name.",required:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("CButton",{attrs:{color:"dark",disabled:""}},[t._v("Portfolio Name")])]},proxy:!0},{key:"append",fn:function(){return[s("CButton",{attrs:{color:"dark",disabled:""}},[s("CIcon",{directives:[{name:"c-tooltip",rawName:"v-c-tooltip.hover.html",value:"<strong>Insert a prefered Portfolio name.</strong>",expression:"'<strong>Insert a prefered Portfolio name.</strong>'",modifiers:{hover:!0,html:!0}}],attrs:{name:t.classwalletName}})],1)]},proxy:!0}]),model:{value:t.walletName,callback:function(e){t.walletName=e},expression:"walletName"}})],1)],1)],1),s("CCardBody",{staticClass:"mb-0 mt-0 pb-0 pt-0"},[s("CRow",[s("CCol",{staticClass:"mt-3",attrs:{col:"12"}},t._l(t.fundsList,(function(e,n){return s("add-fund",{key:n,ref:"checkFund",refInFor:!0,attrs:{posArr:n,fund:e,optsSelect:t.options}})})),1)],1)],1),s("CCardFooter",{staticClass:"mt-0 mb-0 pt-0 pb-0"},[s("CRow",[s("CCol",{staticClass:"mt-3 mb-3",attrs:{col:"12"}},[s("CButton",{ref:"addFundFocus",attrs:{block:"",variant:"outline",color:"info"},on:{click:t.addFund}},[s("CIcon",{attrs:{name:"cil-plus"}}),t._v(" Add Fund to Portfolio ")],1)],1)],1)],1)],1)],1)],1),s("CCardFooter",[s("CRow",[s("CCol",{attrs:{col:"6"}},[s("CButton",{attrs:{block:"",variant:"outline",color:"primary"},on:{click:t.goBack}},[s("CIcon",{attrs:{name:"cil-account-logout"}}),t._v(" Back ")],1)],1),s("CCol",{attrs:{col:"6"}},[s("CButton",{attrs:{block:"",variant:"outline",color:"success"},on:{click:t.saveWallet}},[s("CIcon",{attrs:{name:"cil-save"}}),t._v(" Save Portfolio ")],1)],1)],1)],1)],1)],1)],1)},o=[],i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.show?s("CCard",{staticClass:"mb-0 mt-0 pb-0 pt-0 clear-padding-next-div animated fadeIn",attrs:{"no-header":"","border-color":"primary"}},[s("CCardBody",[s("CRow",{staticClass:"align-items-center h-100"},[s("CCol",{staticClass:"mx-auto text-center",attrs:{col:"1"}},[s("h3",[s("CBadge",{attrs:{pill:"",color:"dark"}},[t._v(t._s(t.posArr+1))])],1)]),s("CCol",{attrs:{col:"11"}},[s("CCard",{staticClass:"mb-0",attrs:{"border-color":"primary"}},[s("CCardHeader",[s("CRow",[s("CCol",{attrs:{col:"11"}},[s("CSelect",{ref:"selectFundFocus",staticClass:"mb-0",attrs:{value:t.selectedFund,options:t.optsSelect,placeholder:"Please select"},on:{"update:value":function(e){t.selectedFund=e}},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("CButton",{attrs:{color:"dark",disabled:""}},[t._v("Select Fund")])]},proxy:!0},{key:"append",fn:function(){return[s("CButton",{attrs:{color:"dark",disabled:""}},[s("CIcon",{directives:[{name:"c-tooltip",rawName:"v-c-tooltip.hover.html",value:"<strong>Select a Fund to add to this portfolio.</strong>",expression:"'<strong>Select a Fund to add to this portfolio.</strong>'",modifiers:{hover:!0,html:!0}}],attrs:{name:t.classselectedFund}})],1)]},proxy:!0}],null,!1,679112762)})],1),s("CCol",{attrs:{col:"1"}},[s("div",{staticClass:"card-header-actions"},[s("CLink",{directives:[{name:"c-tooltip",rawName:"v-c-tooltip.hover.html",value:"<strong>Delete this fund.</strong>",expression:"'<strong>Delete this fund.</strong>'",modifiers:{hover:!0,html:!0}}],staticClass:"card-header-action btn-close",attrs:{href:"#"},on:{click:t.removePanel}},[s("CIcon",{attrs:{name:"cil-x-circle"}})],1)],1)])],1)],1),s("CCardBody",{directives:[{name:"show",rawName:"v-show",value:""!=t.selectedFund,expression:"selectedFund != ''"}],staticClass:"mb-2 mt-2 pb-0 pt-0 pl-0 pr-0"},[s("CRow",[s("CCol",{attrs:{col:"12"}},t._l(t.fund.investList,(function(t,e){return s("add-invest",{key:e,ref:"checkInvest",refInFor:!0,attrs:{invest:t,posArr:e}})})),1)],1)],1),s("CCardFooter",{directives:[{name:"show",rawName:"v-show",value:""!=t.selectedFund,expression:"selectedFund != ''"}]},[s("CRow",[s("CCol",{attrs:{col:"12"}},[s("CButton",{ref:"addInvestFocus",attrs:{block:"",size:"sm",color:"info",variant:"outline"},on:{click:t.addInvest}},[s("CIcon",{attrs:{name:"cil-plus"}}),t._v(" Add new Invest to Fund ")],1)],1)],1)],1)],1)],1)],1)],1)],1):t._e()},a=[],r=s("9be8"),c=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.show?s("CCard",{staticClass:"m-0 p-0",attrs:{"no-header":"","border-color":"primary"}},[s("CCardBody",{staticClass:"pl-2 pr-0 pt-0 pb-2"},[s("CRow",{staticClass:"align-items-center h-100"},[s("CCol",{staticClass:"mx-auto text-center",attrs:{col:"1"}},[s("h5",[s("CBadge",{attrs:{pill:"",color:"dark"}},[t._v(t._s(t.posArr+1))])],1)]),s("CCol",{attrs:{col:"10"}},[s("CRow",[s("CCol",{staticClass:"mt-2",attrs:{xl:"6",lg:"12",md:"12",sm:"12",xs:"12"}},[s("CInput",{ref:"fundDate",staticClass:"mb-0",attrs:{type:"date"},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("CButton",{attrs:{color:"dark",disabled:""}},[s("CIcon",{attrs:{name:"cil-calendar"}})],1)]},proxy:!0},{key:"append",fn:function(){return[s("CButton",{attrs:{color:"dark",disabled:""}},[s("CIcon",{directives:[{name:"c-tooltip",rawName:"v-c-tooltip.hover.html",value:"<strong>Select a date to start this investiment.</strong>",expression:"'<strong>Select a date to start this investiment.</strong>'",modifiers:{hover:!0,html:!0}}],attrs:{name:t.classdateFund}})],1)]},proxy:!0}],null,!1,2002154660),model:{value:t.dateFund,callback:function(e){t.dateFund=e},expression:"dateFund"}})],1),s("CCol",{staticClass:"mt-2",attrs:{xl:"6",lg:"12",md:"12",sm:"12",xs:"12"}},[s("CInput",{ref:"fundNups",staticClass:"mb-0",attrs:{type:"number",placeholder:"ex. 123.45"},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("CButton",{attrs:{color:"dark",disabled:""}},[t._v("NÂº Ups")])]},proxy:!0},{key:"append",fn:function(){return[s("CButton",{attrs:{color:"dark",disabled:""}},[s("CIcon",{directives:[{name:"c-tooltip",rawName:"v-c-tooltip.hover.html",value:"<strong>Insert the number of Nups to invest.</strong>",expression:"'<strong>Insert the number of Nups to invest.</strong>'",modifiers:{hover:!0,html:!0}}],attrs:{name:t.classnUpsFund}})],1)]},proxy:!0}],null,!1,3585295224),model:{value:t.nUpsFund,callback:function(e){t.nUpsFund=e},expression:"nUpsFund"}})],1)],1)],1),s("CCol",{attrs:{col:"1"}},[s("div",{staticClass:"card-header-actions pr-3"},[s("CLink",{directives:[{name:"c-tooltip",rawName:"v-c-tooltip.hover.html",value:"<strong>Delete this investiment.</strong>",expression:"'<strong>Delete this investiment.</strong>'",modifiers:{hover:!0,html:!0}}],staticClass:"card-header-action btn-close",attrs:{href:"#"},on:{click:t.removePanel}},[s("CIcon",{attrs:{name:"cil-x-circle"}})],1)],1)])],1)],1)],1):t._e()},l=[],d={components:{},props:["invest","posArr"],name:"AddInvest",data:function(){return{dateFund:"",dateFundCheck:!1,classdateFund:"cil-x",nUpsFund:"",nUpsFundCheck:!1,classnUpsFund:"cil-x",show:!0,utils:r["a"]}},computed:{},methods:{removePanel:function(){this.show=!1,this.$parent.deleteInvest(this.posArr)},focusInvestDuplicateDate:function(){this.$refs.fundDate.$el.focus()},checkInvest:function(){return this.dateFundCheck?!!this.nUpsFundCheck||(this.$notify({group:"notification",title:"Error",text:"Check the nUps invest field.",type:"danger",position:"top center"}),this.$refs.fundNups.$el.focus(),!1):(this.$notify({group:"notification",title:"Error",text:"Check the date invest field.",type:"danger",position:"top center"}),this.$refs.fundDate.$el.focus(),!1)}},created:function(){},mounted:function(){},beforeCreate:function(){},beforeDestroy:function(){},watch:{dateFund:function(t){var e="",s=new Date,n=new Date(t),o=this.utils.dateIsWeekend(t);this.dateFundCheck=!1,""===t.trim()?(e="x",this.invest.dateInvest=""):Date.parse(s)<Date.parse(n)?(this.$notify({group:"notification",title:"Attention.",type:"warning",text:"You selected a day after Today.",position:"top center"}),e="x",this.invest.dateInvest=""):o?(this.$notify({group:"notification",title:"Attention.",type:"warning",text:"You selected a day of weekend.",position:"top center"}),e="x",this.invest.dateInvest=""):(e="check-alt",this.dateFundCheck=!0,this.invest.dateInvest=this.dateFund,this.invest.dateCheck=new Date(this.dateFund).getTime()),this.classdateFund="cil-"+e},nUpsFund:function(t){var e="";this.nUpsFundCheck=!1,""===t.trim()||1*t.trim()<=0?(e="x",this.invest.nUps=""):(e="check-alt",this.nUpsFundCheck=!0,this.invest.nUps=this.nUpsFund),this.classnUpsFund="cil-"+e}}},u=d,f=(s("73a8"),s("2877")),h=Object(f["a"])(u,c,l,!1,null,"40c5ed92",null),p=h.exports,C={components:{AddInvest:p},props:["optsSelect","posArr","fund"],name:"AddFund",data:function(){return{selectedFund:"",selectedFundCheck:!1,classselectedFund:"cil-x",countInvest:0,show:!0,utils:r["a"]}},computed:{},methods:{addInvest:function(){this.countInvest++,this.fund.investList.push({dateInvest:"",nUps:""})},deleteInvest:function(t){this.countInvest--,this.fund.investList[t]=null},focusFundDuplicate:function(){this.$refs.selectFundFocus.$el.focus()},removePanel:function(){this.show=!1,this.$parent.deleteFund(this.posArr)},checkFund:function(){if(!this.selectedFundCheck)return this.$notify({group:"notification",title:"Error",text:"Check the Select Fund field.",type:"danger",position:"top center"}),this.$refs.selectFundFocus.$el.focus(),!1;if(0===this.fund.investList.length||this.countInvest<=0)return this.$notify({group:"notification",title:"Error",text:"Add one or more investments in this fund.",type:"danger",position:"top center"}),this.$refs.addInvestFocus.focus(),!1;for(var t=[],e=0;e<this.$refs.checkInvest.length;e++)if(this.fund.investList[e]&&(t.push(this.fund.investList[e].dateCheck),!this.$refs.checkInvest[e].checkInvest()))return!1;var s=r["a"].checkDuplicatesV2(t);if(!s.status){for(var n=0;n<this.fund.investList.length;n++)this.fund.investList[this.fund.investList.length-1-n]&&1*this.fund.investList[this.fund.investList.length-1-n].dateCheck===1*s.duplicate[0]&&(this.$refs.checkInvest[this.fund.investList.length-1-n].focusInvestDuplicateDate(),n=this.fund.investList.length);return this.$notify({group:"notification",title:"Error",text:"The list of investments of Fund contains duplicate dates, check this.",type:"danger",position:"top center"}),!1}return!0}},created:function(){},mounted:function(){this.$refs.selectFundFocus.$el.focus()},beforeCreate:function(){},beforeDestroy:function(){},watch:{selectedFund:function(t,e){""===e&&this.addInvest();var s="";if(this.selectedFundCheck=!1,""===t.trim())s="x",this.fund.isin="",this.fund.name="";else{s="check-alt",this.selectedFundCheck=!0;var n=this.selectedFund.split("-");this.fund.isin=n[0].trim(),this.fund.name=n[1].trim()}this.classselectedFund="cil-"+s}}},m=C,v=(s("220c"),Object(f["a"])(m,i,a,!1,null,"430fdf4e",null)),g=v.exports,F={components:{AddFund:g},name:"New Portfolio",data:function(){return{walletName:"",walletNameCheck:!1,classwalletName:"cil-x",fundsList:[],fundCount:0,options:[],utils:r["a"]}},methods:{goBack:function(){this.$router.go(-1),this.$router.replace({path:"/Portfoliofunds"})},addFund:function(){this.fundCount++,this.fundsList.push({isin:"",name:"",investList:[]})},deleteFund:function(t){this.fundsList[t]=null,this.fundCount--},saveWallet:function(){if(!this.walletNameCheck)return this.$refs.walletNameFocus.$el.focus(),this.$notify({group:"notification",title:"Error",text:"Check field 'Portfolio Name'.",type:"danger",position:"top center"});if(0===this.fundsList.length||this.fundCount<=0)return this.$refs.addFundFocus.focus(),this.$notify({group:"notification",title:"Error",text:"Add one or more funds to Portfolio.",type:"danger",position:"top center"});for(var t=[],e=0;e<this.$refs.checkFund.length;e++)if(this.fundsList[e]&&(t.push(this.fundsList[e].isin),!this.$refs.checkFund[e].checkFund()))return console.log("Problems with validations.");var s=r["a"].checkDuplicatesV2(t);if(!s.status){for(var n=0;n<this.fundsList.length;n++)this.fundsList[this.fundsList.length-1-n]&&this.fundsList[this.fundsList.length-1-n].isin===s.duplicate[0]&&(this.$refs.checkFund[this.fundsList.length-1-n].focusFundDuplicate(),n=this.fundsList.length);return this.$notify({group:"notification",title:"Error",text:"The list of fund of Portfolio contains duplicate funds, check this.",type:"danger",position:"top center"})}var o=this,i={owner:JSON.parse(localStorage.getItem("user")).data._id,walletName:this.walletName.trim(),walletFunds:function(){for(var t=[],e=0;e<o.fundsList.length;e++)if(o.fundsList[e])for(var s=0;s<o.fundsList[e].investList.length;s++)t.push({codefund:o.fundsList[e].isin+"-"+o.fundsList[e].investList[s].dateCheck,isin:o.fundsList[e].isin,name:o.fundsList[e].name,dateInvest:o.fundsList[e].investList[s].dateInvest,dateCheck:o.fundsList[e].investList[s].dateCheck,nUps:o.fundsList[e].investList[s].nUps});return t}()};this.$loading.show(),this.$http.post(r["a"].geturl()+"/api/portfoliofunds",i).then((function(t){var e=t.data;!0===e.status?(this.$notify({group:"notification",title:"New Portfolio of funds created.",text:"Portfolio '"+e.data.nameWallet+"' created.",type:"success",position:"top center"}),this.$router.push("/Portfoliofunds")):this.$notify({group:"notification",title:"Save Portfolio Funds.",type:"warning",text:"The name of Portfolio '"+e.data.nameWallet+"' exists in database.",position:"top center"}),this.$loading.hide()})).catch((function(t){console.log("Error",t),t&&401===t.status?(this.$router.push("/login"),localStorage.removeItem("user"),this.$notify({group:"notification",title:"Login Error.",type:"danger",text:t.body.data,position:"top center"})):this.$notify({group:"notification",title:"Error save portfolio.",type:"danger",text:"Error "+t,position:"top center"}),this.$loading.hide()}))},getAllFunds:function(){this.$http.get(r["a"].geturl()+"/api/funds").then((function(t){var e=t.data;if(!0===e.status){var s=e.data;s=s.sort(r["a"].dynamicSort("name")),this.options=[];for(var n=0;n<s.length;n++)this.options.push(s[n].isin+" - "+s[n].name)}else this.$notify({group:"notification",title:"Find Funds.",type:"danger",text:"Find all funds in database.",position:"top center"});this.$loading.hide()})).catch((function(t){console.log("Error",t),t&&401===t.status?(this.$router.push("/login"),localStorage.removeItem("user"),this.$notify({group:"notification",title:"Login Error.",type:"danger",text:t.body.data,position:"top center"})):this.$notify({group:"notification",title:"Errro get funds list.",type:"danger",text:"Error "+t,position:"top center"}),this.$loading.hide()}))}},created:function(){this.getAllFunds()},mounted:function(){this.$loading.show(),this.$refs.walletNameFocus.$el.focus()},beforeCreate:function(){},beforeDestroy:function(){},watch:{walletName:function(t){var e="";this.walletNameCheck=!1,t.trim().length>4?(e="check-alt",this.walletNameCheck=!0):e="x",this.classwalletName="cil-"+e}}},k=F,y=Object(f["a"])(k,n,o,!1,null,null,null);e["default"]=y.exports}}]);
//# sourceMappingURL=chunk-584241d7.6da662c1.js.map