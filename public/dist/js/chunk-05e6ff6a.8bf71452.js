(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-05e6ff6a"],{2306:function(t,e,a){"use strict";a.r(e);var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-row",{staticClass:"animated fadeIn"},[a("b-col",{attrs:{cols:"12"}},[a("b-card",{attrs:{"no-header":""}},[a("template",{slot:"header"},[a("b-row",[a("b-col",{attrs:{cols:"6"}},[a("h3",{staticClass:"card-title"},[t._v("Portfolio Details")])]),a("b-col",{attrs:{cols:"6"}},[a("b-button-toolbar",{staticClass:"float-right",attrs:{"aria-label":"Toolbar with buttons group"}},[a("b-button-group",[a("b-button",{attrs:{variant:"outline-primary"},on:{click:t.openWalletEdit}},[a("i",{staticClass:"cui-note icons"}),t._v(" Edit\n                ")]),a("b-button",{attrs:{variant:"outline-danger"},on:{click:t.deleteWallet}},[a("i",{staticClass:"cui-trash icons"}),t._v(" Delete\n                ")])],1)],1)],1)],1)],1),a("b-form",[a("b-row",[a("b-col",{attrs:{cols:"12"}},[a("b-form-group",[a("b-input-group",[a("b-input-group-prepend",[a("b-input-group-text",[t._v("Portfolio Name")])],1),a("b-form-input",{attrs:{value:t.walletName,type:"text",disabled:""}})],1)],1)],1)],1),a("b-row",[a("b-col",{attrs:{xl:"3",lg:"3",md:"12",sm:"12",xs:"12"}},[a("b-form-group",[a("b-input-group",[a("b-input-group-prepend",[a("b-input-group-text",[t._v("€ Total Invest")])],1),a("b-form-input",{attrs:{value:t.utils.formatCurrency(t.totalInvest),type:"text",disabled:""}})],1)],1)],1),a("b-col",{attrs:{xl:"3",lg:"3",md:"12",sm:"12",xs:"12"}},[a("b-form-group",[a("b-input-group",[a("b-input-group-prepend",[a("b-input-group-text",[t._v("€ Total")])],1),a("b-form-input",{attrs:{value:t.utils.formatCurrency(t.totalEnd),type:"text",disabled:""}})],1)],1)],1),a("b-col",{attrs:{xl:"3",lg:"3",md:"12",sm:"12",xs:"12"}},[a("b-form-group",[a("b-input-group",[a("b-input-group-prepend",[a("b-input-group-text",[t._v("€ Total Gain")])],1),a("b-form-input",{attrs:{value:t.utils.formatCurrency(t.totalEnd-t.totalInvest),type:"text",disabled:""}})],1)],1)],1),a("b-col",{attrs:{xl:"3",lg:"3",md:"12",sm:"12",xs:"12"}},[a("b-form-group",[a("b-input-group",[a("b-input-group-prepend",[a("b-input-group-text",[t._v("Status")])],1),a("b-input-group-text",{class:"bg-"+(t.valArrow>0?"success":t.valArrow="danger")},[a("i",{staticClass:"fa",class:"fa-thumbs-"+(t.valArrow>=0?"up":"down")})])],1)],1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"})],1),a("b-row",[a("b-col",{attrs:{cols:"12"}},[a("b-card",{attrs:{"no-body":""}},[a("template",{slot:"header"},[a("b-row",[a("b-col",{attrs:{cols:"12"}},[a("h4",{staticClass:"card-title"},[t._v(t._s(t.caption))])])],1)],1),a("b-table",{attrs:{stripe:"",bordered:"",small:"",responsive:"sm",items:t.items,fields:t.fields,"current-page":t.currentPage,"per-page":t.perPage},on:{"row-clicked":t.rowClicked},scopedSlots:t._u([{key:"dateInvest",fn:function(e){return[t._v(t._s(t.utils.onlyDateFormat(e.item.dateInvest)))]}},{key:"cotacaoUp",fn:function(e){return[t._v(t._s(t.utils.formatCurrency(e.item.cotacaoUp)))]}},{key:"valInvest",fn:function(e){return[t._v(t._s(t.utils.formatCurrency(e.item.valInvest)))]}},{key:"active",fn:function(t){return[a("input",{attrs:{type:"checkbox",disabled:""},domProps:{checked:t.item.active}})]}},{key:"dateInative",fn:function(e){return[e.item.active?a("n",[t._v("- - -")]):a("n",[t._v(t._s(t.utils.onlyDateFormat(e.item.dateInative)))])]}},{key:"lastvalUp",fn:function(e){return[t._v(t._s(t.utils.formatCurrency(e.item.lastvalUp)))]}},{key:"lastDate",fn:function(e){return[t._v(t._s(t.utils.onlyDateFormat(e.item.lastDate)))]}},{key:"lastVal",fn:function(e){return[t._v(t._s(t.utils.formatCurrency(e.item.lastVal)))]}},{key:"gainValue",fn:function(e){return[a("b-card",{staticClass:"mt-0 mb-0 pt-0 pb-0",class:e.item.gainValue>0?"bg-success":"bg-danger",attrs:{"no-body":!0}},[e.item.active?a("b",[t._v(t._s(t.utils.formatCurrency(e.item.gainValue)))]):a("b",[t._v("0,00")])])]}}])}),a("nav",[a("b-pagination",{attrs:{size:"sm",align:"center","total-rows":t.getRowCount(t.items),"per-page":t.perPage,"prev-text":"Prev","next-text":"Next"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)],2)],1)],1),a("b-row",[a("b-col",{attrs:{cols:"12"}},[a("b-card",{attrs:{"no-header":""}},[a("template",{slot:"header"},[a("b-row",[a("b-col",{attrs:{cols:"5"}},[a("h4",{staticClass:"card-title"},[t._v("Portfolio History")])]),a("b-col",{staticClass:"d-md-block d-sm-block d-xs-block",attrs:{cols:"7"}},[a("b-button-toolbar",{staticClass:"float-right",attrs:{"aria-label":"Toolbar with buttons group"}},[a("b-form-radio-group",{staticClass:"mr-3",attrs:{id:"radiosBtn",buttons:"","button-variant":"outline-secondary",name:"radiosBtn"},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}},[a("b-form-radio",{attrs:{value:"30"}},[t._v("1M")]),t.walletMoney.labels.length>=90?a("b-form-radio",{attrs:{value:"90"}},[t._v("3M")]):t._e(),t.walletMoney.labels.length>=180?a("b-form-radio",{attrs:{value:"180"}},[t._v("6M")]):t._e(),t.walletMoney.labels.length>=365?a("b-form-radio",{attrs:{value:"365"}},[t._v("1Y")]):t._e(),t.walletMoney.labels.length>=730?a("b-form-radio",{attrs:{value:"730"}},[t._v("2Y")]):t._e(),t.walletMoney.labels.length>=1095?a("b-form-radio",{attrs:{value:"1095"}},[t._v("3Y")]):t._e(),t.walletMoney.labels.length>=1460?a("b-form-radio",{attrs:{value:"1460"}},[t._v("4Y")]):t._e(),t.walletMoney.labels.length>=1825?a("b-form-radio",{attrs:{value:"1825"}},[t._v("5Y")]):t._e(),a("b-form-radio",{attrs:{value:t.walletMoney.labels.length}},[t._v("All")])],1)],1)],1)],1)],1),a("b-row",[t.showChart?a("b-col",{attrs:{cols:"12"}},[a("chart-line",{attrs:{id:"lineChart-1",lineChartId:"lineChart-1",chartTitle:"",dataChartLabel:t.chartData.labels,dataChartValues:t.chartData.values}})],1):t._e()],1)],2)],1)],1),a("template",{slot:"footer"},[a("b-row",[a("b-col",{attrs:{cols:"12"}},[a("b-button",{attrs:{block:"",variant:"outline-primary"},on:{click:t.goBack}},[a("i",{staticClass:"cui-account-logout icons active mt-3"}),t._v(" Back\n            ")])],1)],1)],1)],2)],1),a("b-modal",{staticClass:"modal-danger",attrs:{title:"Attention","ok-variant":"danger"},on:{ok:t.closeModalAccept},model:{value:t.deleteWalletModal,callback:function(e){t.deleteWalletModal=e},expression:"deleteWalletModal"}},[t._v("\n    Are you sure you want to delete the Portfolio?\n    "),a("br"),t._v('\n    "'+t._s(t.walletName)+'"\n  ')])],1)},o=[],s=(a("ac6a"),a("55dd"),a("7f7f"),a("a481"),a("d903")),n=a("9be8"),i={components:{ChartLine:s["a"]},props:{caption:{type:String,default:"List Funds in Portfolio"},hover:{type:Boolean,default:!0},striped:{type:Boolean,default:!0},bordered:{type:Boolean,default:!1},small:{type:Boolean,default:!1},fixed:{type:Boolean,default:!1}},name:"PortfolioView",data:function(){return{wallet:"",walletName:"",selected:"30",items:[],fields:[{key:"name",sortable:!0,label:"Fund Name"},{key:"isin",sortable:!0},{key:"dateInvest",label:"Invested Date"},{key:"nUps",label:"Nº Ups"},{key:"cotacaoUp",label:"Buy Price"},{key:"valInvest",label:"Invested Value"},{key:"lastvalUp",label:"Last Value Up"},{key:"lastDate",label:"Last Date Update"},{key:"lastVal",label:"Last Value"},{key:"gainValue",label:"Gain",sortable:!0},{key:"active",label:"Active"},{key:"dateInative"}],currentPage:1,perPage:10,totalRows:0,walletMoney:{labels:[],values:[]},chartData:{labels:[],values:[]},showChart:!1,deleteWalletModal:!1,totalInvest:0,totalEnd:0,valArrow:0,utils:n["a"]}},methods:{goBack:function(){this.$router.go(-1),this.$router.replace({path:"/Portfoliofunds"})},deleteWallet:function(){this.deleteWalletModal=!0},closeModalAccept:function(){this.deleteWalletModal=!1,this.$loading.show(),this.$http.delete(n["a"].geturl()+"/api/portfoliofunds/"+JSON.parse(localStorage.getItem("user")).data._id+"/"+this.wallet).then(function(t){var e=t.data;!0===e.status?(this.$notify({group:"notification",title:"Delete Portfolio.",type:"success",text:e.data,position:"top center"}),this.$router.push("/Portfoliofunds")):this.$notify({group:"notification",title:"Delete Portfolio.",type:"warning",text:e.data,position:"top center"}),this.$loading.hide()}).catch(function(t){console.log("Error",t),t&&401===t.status?(this.$router.push("/login"),localStorage.removeItem("user"),this.$notify({group:"notification",title:"Login Error.",type:"danger",text:t.body.data,position:"top center"})):this.$notify({group:"notification",title:"Error Delete Portfolio.",type:"danger",text:"Error "+t,position:"top center"}),this.$loading.hide()})},openWalletEdit:function(){this.$router.push("/Portfoliofunds/PortfolioEdit/"+this.wallet)},getWalletFundList:function(){this.$http.get(n["a"].geturl()+"/api/portfoliofunds/"+JSON.parse(localStorage.getItem("user")).data._id+"/"+this.wallet).then(function(t){var e=t.data;if(!0===e.status){var a=e.data,l=a.listFunds,o=[];this.walletName=a.nameWallet,this.totalInvest=a.startWalletMoney,this.totalEnd=a.lastWalletMoney,this.valArrow=this.totalEnd-this.totalInvest;for(var s=0;s<l.length;s++)for(var i=0;i<l[s].investList.length;i++)l[s].investList[i]&&o.push({isin:l[s].isin,name:l[s].name,dateInvest:l[s].investList[i].dateInvest,nUps:l[s].investList[i].nUps,cotacaoUp:l[s].investList[i].cotacaoUp,valInvest:l[s].investList[i].valInvest,lastvalUp:l[s].investList[i].moneyFund[l[s].investList[i].moneyFund.length-1].Value,lastDate:l[s].investList[i].moneyFund[l[s].investList[i].moneyFund.length-1].EndDate,lastVal:l[s].investList[i].moneyFund[l[s].investList[i].moneyFund.length-1].moneyCalc,gainValue:l[s].investList[i].moneyFund[l[s].investList[i].moneyFund.length-1].moneyCalc-l[s].investList[i].valInvest,active:l[s].investList[i].active,dateInative:l[s].investList[i].dateInative});this.items=o,this.items=this.items.sort(n["a"].dynamicSort("name"));for(var r=a.moneyWallet,u=0;u<r.length;u++)this.walletMoney.labels.push(n["a"].onlyShortDateFormat(r[u].EndDate)),this.walletMoney.values.push(r[u].moneyWalletCalc.toFixed(2));var c=this.walletMoney.labels.slice(Math.max(this.walletMoney.labels.length-this.selected,1)),d=this.walletMoney.values.slice(Math.max(this.walletMoney.values.length-this.selected,1));this.createChartData(c,d),this.showChart=!0}else this.$notify({group:"notification",title:"Find portfolio.",type:"warning",text:e.data,position:"top center"});this.$loading.hide()}).catch(function(t){console.log("Error",t),t&&401===t.status?(this.$router.push("/login"),localStorage.removeItem("user"),this.$notify({group:"notification",title:"Login Error.",type:"danger",text:t.body.data,position:"top center"})):this.$notify({group:"notification",title:"Error get user portfolio.",type:"danger",text:"Error "+t,position:"top center"}),this.$loading.hide()})},getRowCount:function(t){return t.length},createChartData:function(t,e){this.chartData={labels:t,values:e},this.showChart=!0}},created:function(){this.wallet=this.$route.params.wallet,this.getWalletFundList()},mounted:function(){this.$loading.show()},beforeCreate:function(){},beforeDestroy:function(){},watch:{selected:function(t){var e=this.walletMoney.labels.slice(Math.max(this.walletMoney.labels.length-t,1)),a=this.walletMoney.values.slice(Math.max(this.walletMoney.values.length-t,1));this.createChartData(e,a)}}},r=i,u=a("2877"),c=Object(u["a"])(r,l,o,!1,null,null,null);e["default"]=c.exports},"2f21":function(t,e,a){"use strict";var l=a("79e5");t.exports=function(t,e){return!!t&&l(function(){e?t.call(null,function(){},1):t.call(null)})}},"55dd":function(t,e,a){"use strict";var l=a("5ca1"),o=a("d8e8"),s=a("4bf8"),n=a("79e5"),i=[].sort,r=[1,2,3];l(l.P+l.F*(n(function(){r.sort(void 0)})||!n(function(){r.sort(null)})||!a("2f21")(i)),"Array",{sort:function(t){return void 0===t?i.call(s(this)):i.call(s(this),o(t))}})}}]);
//# sourceMappingURL=chunk-05e6ff6a.8bf71452.js.map